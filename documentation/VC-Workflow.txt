-----------------------------------------
---- Volume Cartographer v2.5   ---------
-----------------------------------------


==== Step 0: Package ====================
All samples must be packaged into our volume package format. If you do not yet 
have a volume package, you can package your slice images using the following 
command:

  vc_packager --slices [slices path] --volpkg [id name]
      or
  vc_packager -s [slices path] -v [id name]



==== Step 1: Segmentation using VC ======
The first step in the unwrapping pipeline is layer segmentation. This is the 
process of isolating a single layer or piece of a layer from the rest of volume. 
This is accomplished in the VC gui app by manually tracing a starting path on a 
layer and propagating that path forward through the volume.

Open the VC gui app and load your volume package using "File->Open Volume..." 
Navigate to and select the ".volpkg" folder generated by Step 0 and click Open. 
After the volume package loads, the slice images from the volume will be shown 
in the Image Viewer in the middle of the screen. These images can be navigated 
using the Previous and Next Slice buttons or the Slice ID box just below the 
Image Viewer. To use the Slice ID box, type a slice ID number into the box and 
press Enter.

To the right of the Image Viewer are the Volume, Segmentation, and Editing 
control panels. The Volume panel lists the individual segmentations currently in 
the volume package. The Segmentation and Editing panels show options and 
parameters for their respective tasks.

---- Create a new segmentation ----------
In the Volume panel, select the New button to add an empty segmentation to the 
volume package. In the Image Viewer, navigate to the slice image on which you 
want to begin segmentation. Select the Pen Tool button at the top of the screen 
to enter Drawing mode. In Drawing mode, trace the layer you wish to segment by 
clicking to place path control points on the layer. Place at least three path 
control points, making sure to place the points closer to the middle of the 
layer rather than towards either edge. After you have drawn your path, click 
the Pen Tool button again to exit Drawing mode. Your starting path will be 
automatically saved to the volume package.

---- Running segmentation ---------------


---- Edit an existing segmentation ------
Selecting a Segmentation ID in this panel will activate that 
segmentation for further propagation and editing and will navigate the Image 
Viewer to the slice on which that segmentation begins.



---- Step 3: Run segmentation -----------
Run segmentation with your generated path:
  vc_segment --seg [Segmentation ID #] --volpkg [volpkg.volpkg/] 

There are three optional arguments, --startIndex [n], --stopOffset [n], --gravity [1-10]:
  --startIndex: specify the slice index n that you want to start a segmentation from. Defaults to the highest Z-index already in the segmentation.
  --stopOffset: stops the simulation after it has gone through n number of slices.
  --gravity sets the gravity vector to 1/n of its original strength. Adjust to higher values if simulation ends after very few iterations. Default is 2.



---- Step 4: Create a textured mesh -----
Texture the resulting mesh using some sort of texturing filter: 
  vc_render [volpkg.volpkg/] [Segmentation ID #] radius texture-method sample-direction

This will output a textured mesh called "textured.obj" inside of the segmentation's subdirectory. vc_render requires all arguments to be present and in the specified order.

Arguments:
  radius: radius in pixels of ellipsoid used for complex filtering
  texture-method: integer corresponding to a texture method in the following list
          0 = Intersection
          1 = Non-Maximum Suppression*
          2 = Minimum
          3 = Median w/ Averaging*
          4 = Median w/o Averaging
          5 = Mean
  sample-direction: integer corresponding to the direction in which to limit the texture search
          0 = Omnidirectional - search along the normal in the positive and negative direction
          1 = Positive        - search along the normal in the positive direction only
          2 = Negative        - search along the normal in the negative direction only



---- Step 6: Enhance the mesh -----------
If the textured mesh is a little dark, use vc_meshnorm to normalize its texture values:

  vc_meshnorm [textured mesh name].ply

This will produce a file "[textured mesh name]_norm.ply"



---- Step 7: Visualize the mesh ---------
To see the mesh projected onto the original slices, use vc_sliceProjection:

  vc_sliceProjection [pathname]_segmented.ply [volume package].volpkg/ [path to output directory]/

This will produce PNGs with the mesh projected onto the slices for easy review



---- NOTES ------------------------------
â€¢ In all circumstances where you have to give the volume package name to a program, I highly suggest using "[name].volpkg/" making sure to include the trailing slash. Some of the programs need the slash to be there.
-----------------------------------------


=========================================
Using VC.app for segmentation
=========================================

New in Volume Cartographer v2.0.0 is an OSX app for segmenting volumes: VC.app. This application completely replaces Steps 2 and 3 in the command line workflow and will, in the future, incorporate most of the command line functionality in the current VC workflow.

[Documentation Coming Soon...]